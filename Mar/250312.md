# 배포 전략
## 1. Non-Progressive Deployment Strategy
### 1–1. 빅뱅 디플로이먼트

BigBang Deployment
첫 번째 전략은 비점진적 배포 전략은 빅뱅 디플로이먼트이다.

가정 원시적인 방법으로 이해할 수 있다.

버전 1에서 버전 2로 업데이트 시, 서버를 내리고 V2로 업데이트 후 다시 서버를 올린다.

성공할 경우, 가장 적은 시간 소요되며 배포 파이프라인설계와 리소스 절약이 가능하다.

그러나 모든 변경 사항이 한 번에 반영되어 충분한 테스트가 어렵고, 문제가 발생하면 롤백이 어렵다.

다운 타임이 무조건 생길 수 밖에 없다. 다만, 비즈니스 니즈에 따라 적절한 경우도 있다고 한다.

### 1–2. 블루그린 디플로이먼트

Blue-Green Deployment
두 번째는 블루그린 디플로이먼트이다.

기존 버전과 최신 버전을 동시에 배포 한다. 로드 밸런서에서 트래픽을 스위칭하여 다운타임이 없다.

문제가 발생하면 기존 버전으로 쉽게 롤백가능하다.

단점으로는 두 개의 환경을 운영해야 하므로 리소스가 두 배 필요하고, 두 개의 버전을 동시에 운영하다 스위칭해야 하기 때문에 설계가 복잡해진다.

빅뱅 디폴로이먼트에 비해 다운타임(Down-Time)은 극복했지만 여전히 급작스러움이 남아있다.

## 2. Progressive Deployment Strategy
### 2–1. 롤링 디플로이먼트

Rolling Deployment
첫 번째 점진적 배포방식은 롤링 디플로이먼트이다.

순차적으로 버전 업데이트를 진행한다. 예를 들어, 10%씩 업데이트 진행한다.

장점으로는 조기에 업데이트 중 문제가 발생하면 이전 버전으로 롤백가능하고, 쿠버네티스를 사용하고 있다면 자동화가 쉽다는 장점이 있다.

단점으로는 천천히 올라가기 때문에 업데이트가 느리다.

동시에 두개의 버전이 공존하기 때문에 하위 호환성 문제가 발생할 수 있다. (Backward compatibility)

이어지는 내용으로, 두 가지 버전의 공존으로 인해 사용자들이 UX 불일치문제가 발생할 수 있다.

### 2–2. 캐너리 디플로이먼트

Canary Deployment
소수의 사용자 혹은 서버에 먼저 배포하여 적합성을 테스트하는 배포 전략이다.

트래픽을 조절하여 소수에 안정성을 테스트할 수 있다(문제가 없을 경우 배포 범위를 점차 넓힘)

빠른 트래픽 컨트롤로 버전 전환에 매우 빠르게 대응할 수 있다.

다만, 아키텍처가 복잡해지고 관리가 어렵다. 트래픽을 섬세하게 관리하게 유지보수해야 하기 때문에 인적 리소스도 많이 필요하다.

### 2–3. 쉐도우 디플로이먼트

Shadow Deployment
비점진적 배포 방식이자 테스트 기반 배포 방식이다.

기존 버전과 신규 버전을 동시에 배포하여 테스트하고, 사용자의 트래픽을 동일하게 두 버전에 분산시킨다. 이를 통해, 사용자에게는 기존 버전을 보여주고 새로운 버전에는 장애가 발생하지 않는지 모니터링할 수 있는 장점이 있다.

리소스 소모가 많지만 미션 크리티컬한 애플리케이션에서 많이 사용된다.(금융권)

### 2–4. AB 테스트 배포

A/B Testing
논리상 버전이 ABCD~ 많아도 가능하다. 캐너리와 유사한데, 트래픽을 조절함으로써 우리에게 유리한 버전(좋은 퍼포먼스)의 성능을 분석할 수 있다.

캐너리 디플로이먼트는 배포 리스크에 중점을 둔 반면 AB테스트 배포는 분석에 중점을 둔다.

캐너리와 마찬가지로 인적 리소스와 설계 복잡성이 높다.
